<section class="bg-main-light shadow p-2 rounded-4 w-75 mx-auto my-2">
  <h1 class="text-center text-main">ShippingAddress:</h1>

  <form [formGroup]="orderForm" (ngSubmit)="orderpayment()">

    <div class="my-2">
      <label for="details">Details</label>
      <textarea formControlName="details" type="text" id="details" class="form-control" [ngClass]="{
        'is-valid': !orderForm.get('details')?.errors && (orderForm.get('details')?.touched || orderForm.get('details')?.dirty),
        'is-invalid': orderForm.get('details')?.errors && (orderForm.get('details')?.touched || orderForm.get('details')?.dirty)
        }"></textarea>
      @if (orderForm.get('details')?.errors && (orderForm.get('details')?.touched||orderForm.get('details')?.dirty))
      {
      <div class="alert alert-danger w-50 ">
        @if (orderForm.get('details')?.getError('required'))
        {
        <p class="m-0">details Is Required </p>
        }
        @else if (orderForm.get('details')?.getError('minlength'))
        {
        <p class="m-0">Details Should be more than or equal 3 chars" </p>
        }
      </div>
      }
    </div>



    <div class="my-2">
      <label for="phone">phone</label>
      <input formControlName="phone" type="tel" id="phone" class="form-control" [ngClass]="{
        'is-valid': !orderForm.get('phone')?.errors && (orderForm.get('phone')?.touched || orderForm.get('phone')?.dirty),
        'is-invalid': orderForm.get('phone')?.errors && (orderForm.get('phone')?.touched || orderForm.get('phone')?.dirty)
        }">
      @if (orderForm.get('phone')?.errors && (orderForm.get('phone')?.touched||orderForm.get('phone')?.dirty))
      {
      <div class="alert alert-danger w-50 ">
        @if (orderForm.get('phone')?.getError('required'))
        {
        <p class="m-0">Phone Is Required </p>
        }
        @else if (orderForm.get('phone')?.getError('pattern'))
        {
        <p class="m-0">Accept Only Egypt Phone Numbers</p>
        }
      </div>
      }
    </div>



    <div class="my-2">
      <label for="city">city</label>
      <input formControlName="city" type="text" id="city" class="form-control" [ngClass]="{
        'is-valid': !orderForm.get('city')?.errors && (orderForm.get('city')?.touched || orderForm.get('city')?.dirty),
        'is-invalid': orderForm.get('city')?.errors && (orderForm.get('city')?.touched || orderForm.get('city')?.dirty)
        }">
      @if (orderForm.get('city')?.errors && (orderForm.get('city')?.touched||orderForm.get('city')?.dirty))
      {
      <div class="alert alert-danger w-50 ">
        @if (orderForm.get('city')?.getError('required'))
        {
        <p class="m-0">city Is Required </p>
        }
        @else if (orderForm.get('city')?.getError('minlength'))
        {
        <p class="m-0">City Should be more than or equal 3 chars" </p>
        }
      </div>
      }
    </div>

    <button [disabled]="orderForm.invalid || isLoading" type="submit" class="btn-main my-2">Check Out
      @if (isLoading) {
      <span><i class="fas fa-spin fa-spinner"></i></span>
      }
    </button>
  </form>
</section>