import './polyfills.server.mjs';
import{a as V,b as g,c as L,d as q,f as N,g as R,h as A,i as D,k as G}from"./chunk-ATA55DUS.mjs";import{a as I}from"./chunk-DLNTFG3A.mjs";import"./chunk-HCOGX7OE.mjs";import{A as w,Ba as E,D as P,Da as y,Ea as p,K as v,L as x,La as d,Ma as h,Sa as b,Va as f,Wb as T,ba as a,ma as u,oa as c,sa as m,ub as F,wa as r,xa as o,ya as C}from"./chunk-H272EWA6.mjs";import"./chunk-VVCT4QZE.mjs";var S=(t,l)=>({"is-valid":t,"is-invalid":l});function B(t,l){t&1&&(r(0,"p",10),d(1,"Email Is Required "),o())}function M(t,l){t&1&&(r(0,"p",10),d(1,"Enter Valid Email"),o())}function k(t,l){if(t&1&&(r(0,"div",7),u(1,B,2,0,"p",10)(2,M,2,0),o()),t&2){let e,n=p(2);a(),m(1,(e=n.verifyEmail.get("email"))!=null&&e.getError("required")?1:(e=n.verifyEmail.get("email"))!=null&&e.getError("email")?2:-1)}}function $(t,l){t&1&&(r(0,"span"),C(1,"i",11),o())}function j(t,l){if(t&1&&(r(0,"p",9),d(1),o()),t&2){let e=p(2);a(),h(e.msgError)}}function O(t,l){if(t&1){let e=E();r(0,"form",3),y("ngSubmit",function(){v(e);let i=p();return x(i.verifyEmailSubmit())}),r(1,"div",4)(2,"label",5),d(3,"email"),o(),C(4,"input",6),u(5,k,3,1,"div",7),o(),r(6,"button",8),d(7,"Verify Email "),u(8,$,2,0,"span"),o(),u(9,j,2,1,"p",9),o()}if(t&2){let e,n,i=p();c("formGroup",i.verifyEmail),a(4),c("ngClass",f(6,S,!((e=i.verifyEmail.get("email"))!=null&&e.errors)&&(((e=i.verifyEmail.get("email"))==null?null:e.touched)||((e=i.verifyEmail.get("email"))==null?null:e.dirty)),((e=i.verifyEmail.get("email"))==null?null:e.errors)&&(((e=i.verifyEmail.get("email"))==null?null:e.touched)||((e=i.verifyEmail.get("email"))==null?null:e.dirty)))),a(),m(5,(n=i.verifyEmail.get("email"))!=null&&n.errors&&((n=i.verifyEmail.get("email"))!=null&&n.touched||(n=i.verifyEmail.get("email"))!=null&&n.dirty)?5:-1),a(),c("disabled",i.verifyEmail.invalid||i.isLoading),a(2),m(8,i.isLoading?8:-1),a(),m(9,i.msgError?9:-1)}}function U(t,l){t&1&&(r(0,"p",10),d(1,"resetCode is required "),o())}function z(t,l){t&1&&(r(0,"p",10),d(1,"Enter Valid Code must be at 6 number"),o())}function H(t,l){if(t&1&&(r(0,"div",7),u(1,U,2,0,"p",10)(2,z,2,0),o()),t&2){let e,n=p(2);a(),m(1,(e=n.verifyCode.get("resetCode"))!=null&&e.getError("required")?1:(e=n.verifyCode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function J(t,l){t&1&&(r(0,"span"),C(1,"i",11),o())}function K(t,l){if(t&1&&(r(0,"p",9),d(1),o()),t&2){let e=p(2);a(),h(e.msgError)}}function Q(t,l){if(t&1){let e=E();r(0,"form",3),y("ngSubmit",function(){v(e);let i=p();return x(i.verifyCodeSubmit())}),r(1,"div",4)(2,"label",12),d(3,"resetCode"),o(),C(4,"input",13),u(5,H,3,1,"div",7),o(),r(6,"button",8),d(7,"Verify Code "),u(8,J,2,0,"span"),o(),u(9,K,2,1,"p",9),o()}if(t&2){let e,n,i=p();c("formGroup",i.verifyCode),a(4),c("ngClass",f(6,S,!((e=i.verifyCode.get("resetCode"))!=null&&e.errors)&&(((e=i.verifyCode.get("resetCode"))==null?null:e.touched)||((e=i.verifyCode.get("resetCode"))==null?null:e.dirty)),((e=i.verifyCode.get("resetCode"))==null?null:e.errors)&&(((e=i.verifyCode.get("resetCode"))==null?null:e.touched)||((e=i.verifyCode.get("resetCode"))==null?null:e.dirty)))),a(),m(5,(n=i.verifyCode.get("resetCode"))!=null&&n.errors&&((n=i.verifyCode.get("resetCode"))!=null&&n.touched||(n=i.verifyCode.get("resetCode"))!=null&&n.dirty)?5:-1),a(),c("disabled",i.verifyCode.invalid||i.isLoading),a(2),m(8,i.isLoading?8:-1),a(),m(9,i.msgError?9:-1)}}function W(t,l){t&1&&(r(0,"p",10),d(1,"Email Is Required "),o())}function X(t,l){t&1&&(r(0,"p",10),d(1,"Enter Valid Email"),o())}function Y(t,l){if(t&1&&(r(0,"div",7),u(1,W,2,0,"p",10)(2,X,2,0),o()),t&2){let e,n=p(2);a(),m(1,(e=n.resetPassword.get("email"))!=null&&e.getError("required")?1:(e=n.resetPassword.get("email"))!=null&&e.getError("email")?2:-1)}}function Z(t,l){t&1&&(r(0,"p",10),d(1,"Password Is Required "),o())}function ee(t,l){t&1&&(r(0,"p",10),d(1,"Password must Be 6 to more any chars "),o())}function te(t,l){if(t&1&&(r(0,"div",7),u(1,Z,2,0,"p",10)(2,ee,2,0),o()),t&2){let e,n=p(2);a(),m(1,(e=n.resetPassword.get("newPassword"))!=null&&e.getError("required")?1:(e=n.resetPassword.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function ie(t,l){t&1&&(r(0,"span"),C(1,"i",11),o())}function ne(t,l){if(t&1&&(r(0,"p",9),d(1),o()),t&2){let e=p(2);a(),h(e.msgError)}}function oe(t,l){t&1&&(r(0,"p",17),d(1,"Reset Password Done......"),o())}function re(t,l){if(t&1){let e=E();r(0,"form",3),y("ngSubmit",function(){v(e);let i=p();return x(i.resetPasswordSubmit())}),r(1,"div",4)(2,"label",5),d(3,"email"),o(),C(4,"input",14),u(5,Y,3,1,"div",7),o(),r(6,"div",4)(7,"label",15),d(8,"password"),o(),C(9,"input",16),u(10,te,3,1,"div",7),o(),r(11,"button",8),d(12,"Reset Password "),u(13,ie,2,0,"span"),o(),u(14,ne,2,1,"p",9)(15,oe,2,0,"p",17),o()}if(t&2){let e,n,i,_,s=p();c("formGroup",s.resetPassword),a(4),c("ngClass",f(9,S,!((e=s.resetPassword.get("email"))!=null&&e.errors)&&(((e=s.resetPassword.get("email"))==null?null:e.touched)||((e=s.resetPassword.get("email"))==null?null:e.dirty)),((e=s.resetPassword.get("email"))==null?null:e.errors)&&(((e=s.resetPassword.get("email"))==null?null:e.touched)||((e=s.resetPassword.get("email"))==null?null:e.dirty)))),a(),m(5,(n=s.resetPassword.get("email"))!=null&&n.errors&&((n=s.resetPassword.get("email"))!=null&&n.touched||(n=s.resetPassword.get("email"))!=null&&n.dirty)?5:-1),a(4),c("ngClass",f(12,S,!((i=s.resetPassword.get("newPassword"))!=null&&i.errors)&&(((i=s.resetPassword.get("newPassword"))==null?null:i.touched)||((i=s.resetPassword.get("newPassword"))==null?null:i.dirty)),((i=s.resetPassword.get("newPassword"))==null?null:i.errors)&&(((i=s.resetPassword.get("newPassword"))==null?null:i.touched)||((i=s.resetPassword.get("newPassword"))==null?null:i.dirty)))),a(),m(10,(_=s.resetPassword.get("newPassword"))!=null&&_.errors&&((_=s.resetPassword.get("newPassword"))!=null&&_.touched||(_=s.resetPassword.get("newPassword"))!=null&&_.dirty)?10:-1),a(),c("disabled",s.resetPassword.invalid||s.isLoading),a(2),m(13,s.isLoading?13:-1),a(),m(14,s.msgError?14:-1),a(),m(15,s.msgSucess?15:-1)}}var _e=(()=>{let l=class l{constructor(){this.step=1,this.isLoading=!1,this.msgError="",this.msgSucess=!1,this._FormBuilder=w(D),this._AuthService=w(I),this._Router=w(T),this.verifyEmail=this._FormBuilder.group({email:[null,[g.required,g.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[g.required,g.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[g.required,g.email]],newPassword:[null,[g.required,g.pattern(/^.{6,}$/)]]})}verifyEmailSubmit(){if(this.verifyEmail.valid){let n=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(n),this.isLoading=!0,this.verifyEmailSub=this._AuthService.setEmailApi(this.verifyEmail.value).subscribe({next:i=>{console.log(i),i.statusMsg=="success"&&(this.msgError="",this.step=2),this.isLoading=!1},error:i=>{this.msgError=i.error.message,console.log(i),this.isLoading=!1}})}}verifyCodeSubmit(){this.verifyCode.valid&&(this.isLoading=!0,this.verifyCodeSub=this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:n=>{console.log(n),n.status=="Success"&&(this.msgError="",this.step=3),this.isLoading=!1},error:n=>{this.msgError=n.error.message,console.log(n),this.isLoading=!1}}))}resetPasswordSubmit(){this.resetPassword.valid&&(this.isLoading=!0,this.resetPasswordSub=this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:n=>{console.log(n),this.msgSucess=!0,this.msgError="",localStorage.setItem("userToken",n.token),this._AuthService.saveUserData(),setTimeout(()=>{this._Router.navigate(["/home"])},1e3),this.isLoading=!1},error:n=>{this.msgError=n.error.message,this.msgSucess=!1,console.log(n),this.isLoading=!1}}))}ngOnDestroy(){this.verifyEmailSub?.unsubscribe(),this.verifyCodeSub?.unsubscribe(),this.resetPasswordSub?.unsubscribe()}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=P({type:l,selectors:[["app-forgetpassword"]],standalone:!0,features:[b],decls:6,vars:3,consts:[[1,"my-4"],[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["type","submit",1,"btn-main",3,"disabled"],[1,"alert","alert-danger","mx-auto","mt-2","w-50","m-0"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control",3,"ngClass"],["readonly","","type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","password"],["type","password","id","password","formControlName","newPassword",1,"form-control",3,"ngClass"],[1,"btn-main","mx-auto","mt-2","m-0","w-50"]],template:function(i,_){i&1&&(r(0,"section",0)(1,"h1",1),d(2,"Forget Password"),o(),u(3,O,10,9,"form",2)(4,Q,10,9,"form",2)(5,re,16,15,"form",2),o()),i&2&&(a(3),m(3,_.step==1?3:-1),a(),m(4,_.step==2?4:-1),a(),m(5,_.step==3?5:-1))},dependencies:[G,N,V,L,q,R,A,F]});let t=l;return t})();export{_e as ForgetpasswordComponent};
