import './polyfills.server.mjs';
import{a as I,b as c,c as B,d as G,f as V,g as M,h as O,i as $,k as j}from"./chunk-ATA55DUS.mjs";import{a as k}from"./chunk-DLNTFG3A.mjs";import"./chunk-HCOGX7OE.mjs";import{A as P,D as N,Da as q,Ea as w,La as a,Ma as x,Sa as L,Va as y,Wb as D,ba as s,ma as _,oa as h,sa as u,ub as A,wa as i,xa as r,ya as F}from"./chunk-H272EWA6.mjs";import"./chunk-VVCT4QZE.mjs";var R=(t,n)=>({"is-valid":t,"is-invalid":n});function z(t,n){t&1&&(i(0,"p",18),a(1,"Name Is Required "),r())}function W(t,n){t&1&&(i(0,"p",18),a(1,"Name Should be more than or equal 3 chars"),r())}function H(t,n){t&1&&(i(0,"p",18),a(1,"Name Should be less than or equal 20 chars"),r())}function J(t,n){if(t&1&&(i(0,"div",6),_(1,z,2,0,"p",18)(2,W,2,0)(3,H,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("name"))!=null&&l.getError("required")?1:(l=o.registerForm.get("name"))!=null&&l.getError("minlength")?2:(l=o.registerForm.get("name"))!=null&&l.getError("maxlength")?3:-1)}}function K(t,n){t&1&&(i(0,"p",18),a(1,"Email Is Required "),r())}function Q(t,n){t&1&&(i(0,"p",18),a(1,"Enter Valid Email"),r())}function U(t,n){if(t&1&&(i(0,"div",6),_(1,K,2,0,"p",18)(2,Q,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("email"))!=null&&l.getError("required")?1:(l=o.registerForm.get("email"))!=null&&l.getError("email")?2:-1)}}function X(t,n){t&1&&(i(0,"p",18),a(1,"Phone Is Required "),r())}function Y(t,n){t&1&&(i(0,"p",18),a(1,'"Accept Only Egypt Phone Numbers" '),r())}function Z(t,n){if(t&1&&(i(0,"div",6),_(1,X,2,0,"p",18)(2,Y,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("phone"))!=null&&l.getError("required")?1:(l=o.registerForm.get("phone"))!=null&&l.getError("pattern")?2:-1)}}function ee(t,n){t&1&&(i(0,"p",18),a(1,"Password Is Required "),r())}function te(t,n){t&1&&(i(0,"p",18),a(1,"Password must Be 6 to more any chars "),r())}function re(t,n){if(t&1&&(i(0,"div",6),_(1,ee,2,0,"p",18)(2,te,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("password"))!=null&&l.getError("required")?1:(l=o.registerForm.get("password"))!=null&&l.getError("pattern")?2:-1)}}function ie(t,n){t&1&&(i(0,"div",6)(1,"p",18),a(2,"Password confirmation is incorrect"),r()())}function ne(t,n){t&1&&(i(0,"span"),F(1,"i",19),r())}function le(t,n){if(t&1&&(i(0,"p",16),a(1),r()),t&2){let l=w();s(),x(l.msgError)}}function oe(t,n){t&1&&(i(0,"p",17),a(1,"Register Sucess Wait...."),r())}var ce=(()=>{let n=class n{constructor(){this._AuthService=P(k),this._FormBuilder=P($),this._Router=P(D),this.msgError="",this.isLoading=!1,this.msgSucess=!1,this.registerForm=this._FormBuilder.group({name:[null,[c.required,c.minLength(3),c.maxLength(20)]],email:[null,[c.required,c.email]],phone:[null,[c.required,c.pattern(/^01[0125][0-9]{8}$/)]],password:[null,[c.required,c.pattern(/^.{6,}$/)]],rePassword:[""]},{validators:this.confirmPassword})}registerSubmit(){this.registerForm.valid&&(this.isLoading=!0,this.regesterSub=this._AuthService.setRegisterForm(this.registerForm.value).subscribe({next:o=>{console.log(o),o.message=="success"&&(this.msgSucess=!0,this.msgError="",setTimeout(()=>{this._Router.navigate(["/login"])},1e3)),this.isLoading=!1},error:o=>{this.msgError=o.error.message,this.msgSucess=!1,console.log(o),this.isLoading=!1}}))}ngOnDestroy(){this.regesterSub?.unsubscribe()}confirmPassword(o){return o.get("password")?.value===o.get("rePassword")?.value?null:{mismatch:!0}}};n.\u0275fac=function(b){return new(b||n)},n.\u0275cmp=N({type:n,selectors:[["app-register"]],standalone:!0,features:[L],decls:34,vars:30,consts:[[1,"bg-main-light","shadow","rounded-4","p-2","my-4"],[1,"text-center","text-main",2,"font-size","64px"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control",3,"ngClass"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["for","rePassword"],["type","password","id","rePassword","formControlName","rePassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","d-block","ms-auto",3,"disabled"],[1,"alert","alert-danger","w-50","m-0"],[1,"btn-main","m-0","w-50"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(b,e){if(b&1&&(i(0,"section",0)(1,"h1",1),a(2,"Register Now"),r(),i(3,"form",2),q("ngSubmit",function(){return e.registerSubmit()}),i(4,"div",3)(5,"label",4),a(6,"name"),r(),F(7,"input",5),_(8,J,4,1,"div",6),r(),i(9,"div",3)(10,"label",7),a(11,"email"),r(),F(12,"input",8),_(13,U,3,1,"div",6),r(),i(14,"div",3)(15,"label",9),a(16,"phone"),r(),F(17,"input",10),_(18,Z,3,1,"div",6),r(),i(19,"div",3)(20,"label",11),a(21,"password"),r(),F(22,"input",12),_(23,re,3,1,"div",6),r(),i(24,"div",3)(25,"label",13),a(26,"rePassword"),r(),F(27,"input",14),_(28,ie,3,0,"div",6),r(),i(29,"button",15),a(30,"Register "),_(31,ne,2,0,"span"),r(),_(32,le,2,1,"p",16)(33,oe,2,0,"p",17),r()()),b&2){let m,C,d,v,g,E,p,S,f,T;s(3),h("formGroup",e.registerForm),s(4),h("ngClass",y(15,R,!((m=e.registerForm.get("name"))!=null&&m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)),((m=e.registerForm.get("name"))==null?null:m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)))),s(),u(8,(C=e.registerForm.get("name"))!=null&&C.errors&&((C=e.registerForm.get("name"))!=null&&C.touched||(C=e.registerForm.get("name"))!=null&&C.dirty)?8:-1),s(4),h("ngClass",y(18,R,!((d=e.registerForm.get("email"))!=null&&d.errors)&&(((d=e.registerForm.get("email"))==null?null:d.touched)||((d=e.registerForm.get("email"))==null?null:d.dirty)),((d=e.registerForm.get("email"))==null?null:d.errors)&&(((d=e.registerForm.get("email"))==null?null:d.touched)||((d=e.registerForm.get("email"))==null?null:d.dirty)))),s(),u(13,(v=e.registerForm.get("email"))!=null&&v.errors&&((v=e.registerForm.get("email"))!=null&&v.touched||(v=e.registerForm.get("email"))!=null&&v.dirty)?13:-1),s(4),h("ngClass",y(21,R,!((g=e.registerForm.get("phone"))!=null&&g.errors)&&(((g=e.registerForm.get("phone"))==null?null:g.touched)||((g=e.registerForm.get("phone"))==null?null:g.dirty)),((g=e.registerForm.get("phone"))==null?null:g.errors)&&(((g=e.registerForm.get("phone"))==null?null:g.touched)||((g=e.registerForm.get("phone"))==null?null:g.dirty)))),s(),u(18,(E=e.registerForm.get("phone"))!=null&&E.errors&&((E=e.registerForm.get("phone"))!=null&&E.touched||(E=e.registerForm.get("phone"))!=null&&E.dirty)?18:-1),s(4),h("ngClass",y(24,R,!((p=e.registerForm.get("password"))!=null&&p.errors)&&(((p=e.registerForm.get("password"))==null?null:p.touched)||((p=e.registerForm.get("password"))==null?null:p.dirty)),((p=e.registerForm.get("password"))==null?null:p.errors)&&(((p=e.registerForm.get("password"))==null?null:p.touched)||((p=e.registerForm.get("password"))==null?null:p.dirty)))),s(),u(23,(S=e.registerForm.get("password"))!=null&&S.errors&&((S=e.registerForm.get("password"))!=null&&S.touched||(S=e.registerForm.get("password"))!=null&&S.dirty)?23:-1),s(4),h("ngClass",y(27,R,!e.registerForm.getError("mismatch")&&(((f=e.registerForm.get("rePassword"))==null?null:f.touched)||((f=e.registerForm.get("rePassword"))==null?null:f.dirty)),e.registerForm.getError("mismatch")&&(((f=e.registerForm.get("rePassword"))==null?null:f.touched)||((f=e.registerForm.get("rePassword"))==null?null:f.dirty)))),s(),u(28,e.registerForm.getError("mismatch")&&((T=e.registerForm.get("rePassword"))!=null&&T.touched||(T=e.registerForm.get("rePassword"))!=null&&T.dirty)?28:-1),s(),h("disabled",e.registerForm.invalid||e.isLoading),s(2),u(31,e.isLoading?31:-1),s(),u(32,e.msgError?32:-1),s(),u(33,e.msgSucess?33:-1)}},dependencies:[j,V,I,B,G,M,O,A]});let t=n;return t})();export{ce as RegisterComponent};
