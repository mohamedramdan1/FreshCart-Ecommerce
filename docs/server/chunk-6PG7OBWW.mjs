import './polyfills.server.mjs';
import{a as V}from"./chunk-F2CXJGOZ.mjs";import{a as O}from"./chunk-EUIEWTTP.mjs";import"./chunk-HCOGX7OE.mjs";import{$ as g,A as h,Ab as P,Ba as b,D as S,Da as _,Ea as d,K as p,L as u,La as l,Na as C,Sa as D,Ua as I,Xb as T,Ya as x,_a as f,ba as s,ma as w,oa as v,sa as y,ua as k,va as E,wa as r,xa as a,ya as m}from"./chunk-H272EWA6.mjs";import"./chunk-VVCT4QZE.mjs";var F=(n,c)=>c.product.id,$=n=>["/orders",n];function L(n,c){if(n&1){let e=b();r(0,"div",7)(1,"div",10)(2,"div"),m(3,"img",11),a()(),r(4,"div",12)(5,"div")(6,"h3",13),l(7),x(8,"termtext"),a(),r(9,"p",14),l(10),x(11,"currency"),a(),r(12,"span",15),_("click",function(){let t=p(e).$implicit,o=d(2);return u(o.removeProductCart(t.product.id))}),m(13,"i",16),l(14," Remove "),a()(),r(15,"div",17)(16,"span",18),_("click",function(){let t=p(e).$implicit,o=d(2);return u(o.updateCount(t.product.id,t.count+1))}),m(17,"i",19),a(),r(18,"span"),l(19),a(),r(20,"span",18),_("click",function(){let t=p(e).$implicit,o=d(2);return u(o.updateCount(t.product.id,t.count-1))}),m(21,"i",20),a()()()()}if(n&2){let e=c.$implicit;s(3),v("src",e.product.imageCover,g)("alt",e.product.title),s(4),C(" ",f(8,5,e.product.title,2)," "),s(3),C(" Price : ",f(11,8,e.price,"EGP")," "),s(9),C(" ",e.count," ")}}function N(n,c){if(n&1){let e=b();r(0,"section",0)(1,"div",3)(2,"h1",4),l(3,"Shop Cart"),a(),r(4,"button",5),_("click",function(){p(e);let t=d();return u(t.clearAllCart())}),l(5,"Clear Cart"),a()(),r(6,"p",6),l(7),x(8,"currency"),a(),k(9,L,22,11,"div",7,F),r(11,"button",8),l(12,"Online Payment "),m(13,"img",9),a()()}if(n&2){let e=d();s(7),C("Total Price : ",f(8,2,e.cartDetails.totalCartPrice,"EGP")," "),s(2),E(e.cartDetails.products),s(2),v("routerLink",I(5,$,e.cartDetails._id))}}function j(n,c){n&1&&(r(0,"h1",21),l(1,"Your Cart Is Empty......."),a())}var U=(()=>{let c=class c{constructor(){this._CartsService=h(V),this.cartDetails=null}ngOnInit(){this._CartsService.getProductCart().subscribe({next:i=>{this.cartDetails=i.data,this._CartsService.cartNumber.set(i.numOfCartItems),i.numOfCartItems==0&&(this.cartDetails=null)}})}removeProductCart(i){this._CartsService.deleteSpecficCart(i).subscribe({next:t=>{console.log(t),this.cartDetails=t.data,this._CartsService.cartNumber.set(t.numOfCartItems),t.numOfCartItems==0&&(this.cartDetails=null)}})}updateCount(i,t){this._CartsService.updateCartQunatity(i,t).subscribe({next:o=>{this.cartDetails=o.data,this._CartsService.cartNumber.set(o.numOfCartItems),o.numOfCartItems==0&&(this.cartDetails=null)}})}clearAllCart(){this._CartsService.clearCart().subscribe({next:i=>{i.message=="success"&&(this.cartDetails=null,this._CartsService.cartNumber.set(0))}})}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=S({type:c,selectors:[["app-cart"]],standalone:!0,features:[D],decls:5,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"border","rounded","shadow-sm","p-3","mt-5","mx-auto","w-50"],["routerLink","/allorders",1,"btn-main","w-100"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-main"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main","h4","mb-3"],[1,"row","mb-2","border-bottom","cart"],[1,"btn-main","mt-2","py-0",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","visa Payment"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"],[1,"text-center","text-danger"]],template:function(t,o){t&1&&(w(0,N,14,7,"section",0)(1,j,2,0),r(2,"section",1)(3,"button",2),l(4,"My Orders"),a()()),t&2&&y(0,o.cartDetails!=null?0:1)},dependencies:[P,T,O]});let n=c;return n})();export{U as CartComponent};
